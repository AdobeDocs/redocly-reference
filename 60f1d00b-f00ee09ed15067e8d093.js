/*! For license information please see 60f1d00b-f00ee09ed15067e8d093.js.LICENSE.txt */
"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[28],{17057:function(e,t,n){n.d(t,{U$:function(){return he},UU:function(){return pe},l0:function(){return ze}});var r=n(15007),i=n(40033);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(o){i=!0,a=o}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C,S,E=(C=function(e){function t(e,t){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t[Math.abs(n)%t.length]}function n(e,t){var n=t.namespace;if(t.useColors){var r=t.color,i="  ".concat("[3"+(r<8?r:"8;5;"+r),";1m").concat(n," [0m");e[0]=i+e[0].split("\n").join("\n"+i)}else e[0]=n+" "+e[0]}function r(e,t){if(e[0]=(t.useColors?"%c":"")+t.namespace,t.useColors){var n="color: "+t.color,r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,n)}}var a=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];e&&i.unshift(e);var l=n.namespaces.split(",").map((function(e){return"*"===e[e.length-1]?new RegExp("^"+e.slice(0,e.length-1)+".*$"):new RegExp("^"+e+"$")}));l.some((function(t){return t.test(e)})),t(e,n.colors),n.useColors}}void 0===i||"renderer"===i.type||!0===i.browser||i.__nwjs?e.exports=function(e){return l(e,function(){var e;try{e=localStorage.getItem("debug")}catch(t){}return!e&&void 0!==i&&"env"in i&&(e={}.DEBUG),{namespaces:e||"",colors:a,useColors:!0,formatArgs:r}}())}:e.exports=function(e){return l(e,{namespaces:{}.DEBUG||"",colors:[6,2,3,4,5,1],useColors:!0,formatArgs:n})}},C(S={exports:{}},S.exports),S.exports),V=E("informed:ObjMap\t"),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String.prototype.replace.call(e,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean)},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=String.prototype.replace.call(t,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e);return void 0===r||r===e?n:r},x=function(e){return".".concat(e).replace(/(.*)[.[].*/,"$1").replace(/\./,"")},w=function(e,t){var n=x(t),r=function(e){return e.replace(x(e),"").replace(/\./,"")}(t),i=n?A(e,n):e;return!(!i||!Object.hasOwnProperty.call(i,r.replace(/\[(.*)\]/,"$1")))},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;String.prototype.replace.call(t,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t,r,i){return r===i.length-1?(e[t]=n,e[t]):void 0===e[t]?(Number.isInteger(+i[r+1])?e[t]=[]:e[t]={},e[t]):(Number.isInteger(+i[r+1])&&!Array.isArray(e[t])&&(e[t]=[]),e[t])}),e)},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1;return String.prototype.replace.call(t,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t,r,i){return void 0===e?e:r===i.length-1?(delete e[t],n=!0,e[t]):e[t]}),e),n},I=function(e){var t=k(e);return Number.isInteger(+t[t.length-1])},B=function(){function e(){a(this,e)}return u(e,null,[{key:"empty",value:function(e){return 0===function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return e[t]}))}(e).length}},{key:"get",value:function(e,t){return A(e,t)}},{key:"has",value:function(e,t){return w(e,t)}},{key:"set",value:function(t,n,r){if(void 0!==r)V("SETTING",n,r),O(t,n,r);else if(I(n)&&void 0!==e.get(t,n)){V("Special case SETTING",n,"to undefined"),O(t,n,void 0);var i=k(n);P(t,i=i.slice(0,i.length-1))}else I(n)||void 0===e.get(t,n)||(V("Special case REMOVING",n,"from object completley"),e.delete(t,n))}},{key:"delete",value:function(e,t){V("DELETE",t),I(t)?(V("ARRAY",t),this.pullOut(e,t)):R(e,t);var n=k(t);P(e,n=n.slice(0,n.length-1))}},{key:"pullOut",value:function(e,t){var n=k(t),r=n[n.length-1];n=n.slice(0,n.length-1),V("Pulling out:",n,"index",r);var i=A(e,n);V("Array",i),Array.isArray(i)&&function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";String.prototype.replace.call(n,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,n,r,i){return void 0===e?e:r===i.length-1&&Array.isArray(e)?(t=e.splice(n,1),e[n]):e[n]}),e)}(i,r),P(e,n)}}]),e}();function P(e,t){if(0!==t.length){var n=A(e,t);(Array.isArray(n)?n.every((function(e){return null==e})):"{}"===JSON.stringify(n))&&R(e,t),P(e,t.slice(0,t.length-1))}}var T=r.default.createContext({register:function(){},deregister:function(){},setValue:function(){},setTouched:function(){},setError:function(){},update:function(){},getField:function(){},expectRemoval:function(){},getInitialValue:function(){},getSavedValue:function(){}}),j=r.default.createContext({}),D=r.default.createContext({getFullField:function(){},getValues:function(){},getOptions:function(){return{}},setInitialValue:function(){},getInitialValue:function(){},getDerrivedValue:function(){},getSavedValue:function(){},removeSavedState:function(){}}),M=r.default.createContext(),G=r.default.createContext(),N=r.default.createContext(),L=r.default.createContext(),U=r.default.createContext(),_=r.default.createContext();function $(){return(0,r.useContext)(D)}function q(e){var t=(0,r.useRef)(),n=(0,r.useRef)(!0),i=m((0,r.useState)(e),2),a=i[0],l=i[1];t.current=a;return(0,r.useEffect)((function(){return function(){n.current=!1}}),[]),[a,function(e){t.current=e,n.current&&l(e)},function(){return t.current}]}var W=function(e){return e.type&&e.type.name?e.type.name:e.displayName||e.name||"Component"},z=function(e){var t={};if(e.inner){if(0===e.inner.length)return void B.set(t,e.path,e.message);var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw a}}}}(e.inner);try{for(r.s();!(n=r.n()).done;){var i=n.value;B.get(t,i.path)||B.set(t,i.path,i.message)}}catch(i){r.e(i)}finally{r.f()}}return t},J=function(e,t){try{e.validateSync(t,{abortEarly:!1})}catch(n){return z(n)}},K=function(e){if(e.inner){if(0===e.inner.length)return;return e.inner[0].message}},X=function(e,t){try{e.validateSync(t,{abortEarly:!1})}catch(n){return K(n)}},Y=function(e,t){e(t);var n={};return e.errors&&e.errors.forEach((function(e){var t=e.message,r=e.dataPath,i=e.keyword,a=e.params,l=r;"required"===i&&(l="".concat(l,".").concat(a.missingProperty)),l=l.replace(".",""),B.set(n,l,t)})),n},Z=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},H=function(e,t,n){var r=t["ui:control"],i=t["informed:props"],a=t["input:props"],l=t["ui:before"],u=t["ui:after"],o=t.oneOf,s=t.items,c=t.enum,f=t.title,h=t.minimum,v=t.maximum,p=t.minLength,g=t.maxLength,m=t.pattern,y=t.type,b=t.properties,F=Z();a&&a.id&&(F=a.id);var C={componentType:r,field:n?"".concat(n,".").concat(e):e,type:y,uiBefore:l,uiAfter:u,properties:"object"===y?b:void 0,items:"array"===y?s:void 0,props:d(d({label:f,id:F,min:h,max:v,minLength:p,maxLength:g,pattern:m},i),a)};if(o){var S=t.oneOf.map((function(e){var t=e["input:props"],n=void 0===t?{}:t;return d({value:e.const,label:e.title},n)}));C.props.options=S}if(c){var E=t.enum.map((function(e){return{value:e,label:e}}));C.props.options=E}if(s&&s.oneOf){var V=s.oneOf.map((function(e){var t=e["input:props"],n=void 0===t?{}:t;return d({value:e.const,label:e.title},n)}));C.props.options=V}return C},Q=function(e,t,n){if(!e||t)return[];var r=e.properties,i=void 0===r?{}:r,a=e.allOf,l=e.propertyOrder,u=void 0===l?[]:l;if(Object.keys(i).length>0){var o=Object.keys(i).sort((function(e,t){var n=u.indexOf(e),r=u.indexOf(t);return(n>-1?n:u.length+1)-(r>-1?r:u.length+1)})).map((function(e){var t=i[e];return H(e,t,n)}));return a&&o.push({componentType:"conditionals",allOf:a}),o}return[]},ee=function(e,t){if(!e)return{val:e,offset:0};var n="".concat(e),r=function(e,t){if("string"==typeof e)return e.split("").map((function(e){return"#"===e?/\d/:"*"===e?/[\w]/:e}));if("function"==typeof e)return e(t);if(Array.isArray(e))return e;throw new Error("Formatter must be string, array, or function")}(t,n),i=r.findIndex((function(e){return"string"!=typeof e})),a=r.length-y(r).reverse().findIndex((function(e){return"string"!=typeof e})),l=[],u=n.split(""),o=0,s=0,c=function(e,t){for(var n=0,r=-1,i=!0;i&&n<e.length;)e[n]==t[n]?r=n:i=!1,n+=1;return r}(r.slice(0,i),u.slice(0,i));c>-1&&(o=c+1,l=l.concat(r.slice(0,c+1)),s=c+1),c<0&&(l=l.concat(r.slice(0,i)),s=i);for(var d=s;d<r.length;d++){var f=r[d];if(o!=u.length){var h=u[o];if("function"==typeof f)l.push(f(h)),o+=1;else{var v="string"==typeof f?f===h:f.test(h);v&&"string"==typeof f?(l.push(f),o+=1):v||"string"!=typeof f?v&&"string"!=typeof f?(l.push(h),o+=1):v||"string"==typeof f||(o+=1,d-=1):o!=u.length&&l.push(f)}}else{if(!("string"==typeof f&&d>=a))break;l.push(f)}}return{value:l.join(""),offset:n?l.length-n.length:0}},te="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,ne=function(e){var t=e.value,n=e.inputRef,r=e.maintainCursor,i=void 0===r||r,a=m(q(0),3),l=a[0],u=a[1],o=a[2],s=m(q(0),3),c=s[0],d=s[1],f=s[2];return te((function(){if(null!=n.current&&o()){var e=o()+f();0!=f()&&i?n.current.setSelectionRange(e+1,e+1):i&&n.current.setSelectionRange(e,e)}}),[t]),{setCursorOffset:d,setCursor:u,cursor:l,getCursor:o,cursorOffset:c}},re=function(e,t){var n=(0,r.useRef)(!0),i=n.current;(0,r.useEffect)((function(){if(!i)return e();n.current=!1}),t)},ie=E("informed:useField\t"),ae=function(e,t,n,r,i){if(null!=e)return i?i(e):t?t(e):n&&!r?ee(e,n).value:e},le=function(e,t,n,r){return t&&n?t(e):r?ee(e,r).value:e},ue=function(e,t,n){var r=n.required;return e||t?function(n,r){return t?X(t,n):e?e(n,r):void 0}:r?function(e){return fe(e,r)}:void 0},oe=function(e){var t=e.fieldType,n=e.setValue,r=e.onChange,i=e.multiple,a=e.ref,l=function(e){return n(e)};return"text"!==t&&"textArea"!==t&&"number"!==t||(l=function(e){return n(e.target.value,e)}),"select"===t&&(l=function(){var e=Array.from(a.current).filter((function(e){return e.selected})).map((function(e){return e.value}));n(i?e:e[0]||"")}),"checkbox"===t&&(l=function(e){n(e.target.checked),r&&r(e)}),function(e){l(e)}},se=function(e){var t=e.setTouched,n=e.onBlur;return function(e){t(!0),n&&n(e)}},ce=function(e){var t=e.fieldType,n=e.maskedValue,r=e.multiple,i=e.value;switch(t){case"text":case"number":return n||0===n?n:"";case"textArea":return n||"";case"select":return i||(r?[]:"");case"checkbox":return!!i;default:return i}},de=function(e){switch(e){case"text":case"number":case"checkbox":return e;default:return}},fe=function(e,t){if(t&&(null==e||""===e))return"string"==typeof t?t:"This field is required"};function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.field,i=e.validate,a=e.asyncValidate,l=e.validationSchema,u=e.mask,o=e.maskWithCursorOffset,s=e.format,c=e.parse,f=e.formatter,h=e.parser,p=e.initialValue,g=e.validateOnChange,b=e.validateOnBlur,F=e.validateOnMount,C=e.asyncValidateOnBlur,S=e.maskOnBlur,E=e.allowEmptyString,V=e.onValueChange,k=e.notify,A=e.keepState,x=e.maintainCursor,w=e.debug,O=e.shadow,R=e.step,I=e.fieldType,P=e.multiple,j=e.onChange,D=e.onBlur,M=e.formController,G=e.relevant,N=e.required,L=e.keepStateIfRelevant,U=e.initialize,W=e.formatterDependencies,z=void 0===W?[]:W,J=v(e,["field","validate","asyncValidate","validationSchema","mask","maskWithCursorOffset","format","parse","formatter","parser","initialValue","validateOnChange","validateOnBlur","validateOnMount","asyncValidateOnBlur","maskOnBlur","allowEmptyString","onValueChange","notify","keepState","maintainCursor","debug","shadow","step","fieldType","multiple","onChange","onBlur","formController","relevant","required","keepStateIfRelevant","initialize","formatterDependencies"]),K=(0,r.useState)(Z()),X=m(K,1),Y=X[0],H=(0,r.useContext)(T),Q=(0,r.useContext)(_),fe=Q||L,he=$(),ve=(0,r.useRef)(),pe=(0,r.useRef)(!0),ge=(0,r.useRef)(),me=(0,r.useRef)(!1),ye=function(){return!me.current},be=function(){return me.current};M&&(H=M.updater,he=M.getFormApi());var Fe,Ce,Se=ue(i,l,{required:N}),Ee=(0,r.useState)((function(){return H.getInitialValue(n)})),Ve=m(Ee,1),ke=Ve[0],Ae=H.getSavedValue(n);(A||fe)&&Ae?(ie("Setting field ".concat(St,"'s kept state"),Ae),Fe=Ae.value,Ce=Ae.touched,he.removeSavedState(St)):Fe=null!=p?p:ke;var xe=q(ae(Fe,u,f,h,U)),we=m(xe,3),Oe=we[0],Re=we[1],Ie=we[2],Be=q(F?Se(Oe):void 0),Pe=m(Be,3),Te=Pe[0],je=Pe[1],De=Pe[2],Me=q(Ce),Ge=m(Me,3),Ne=Ge[0],Le=Ge[1],Ue=Ge[2],_e=(0,r.useState)((function(){return le(Oe,s,c,f)})),$e=m(_e,2),qe=$e[0],We=$e[1],ze=(0,r.useRef)();ze.current=qe;var Je=(0,r.useRef)(p),Ke=(0,r.useRef)(n),Xe=(0,r.useRef)();Je.current=p,Ke.current=n;var Ye=(0,r.useRef)(null),Ze=r.default.useMemo((function(){return t||Ye}),[]),He=ne({value:Oe,inputRef:Ze,maintainCursor:!!x}),Qe=He.getCursor,et=He.setCursor,tt=He.setCursorOffset,nt=function(){return!0},rt=function(e){var t=G||nt,n=he.getFullField(Ke.current)||Ke.current,r={path:n,parentPath:n.replace(/(.*)[.[].*/,"$1"),get:function(e,t){return B.get(e,t)}};return Q&&Q.relevant?t(e,r)&&Q.relevant(e,r):t(e,r)},it=q(rt(he.getValues())),at=m(it,3),lt=at[0],ut=at[1],ot=at[2],st=function(e){return!Q||!Q.relevant||Q.relevant(e)},ct=function(){var e=rt(he.getValues());return e!=ot()&&ut(e),e};(0,r.useEffect)((function(){lt||A||ve.current.reset()}),[lt]);var dt=function(){return O?he.getDerrivedValue(n):Ie()},ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.preventUpdate;R&&he.getStep()<R?(ie("Setting ".concat(n,"'s error to undefined as we are not at that step")),je(void 0),H.setError(Y,void 0,!r)):(ie("Setting ".concat(n,"'s error to ").concat(e)),je(e),H.setError(Y,e,!r))},ht=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t;me.current=!0,ie("Setting ".concat(n," to ").concat(a)),U&&(a=U(a));var l=he.getOptions(),d=a;if(""!==a||E||i.allowEmptyString||l.allowEmptyStrings||(a=void 0),"number"!==e.type&&"number"!==I||void 0===a||(a=+a),r&&r.target&&r.target.selectionStart&&et(r.target.selectionStart),u&&!S&&(d=u(a,Qe()),a=u(a,Qe())),o&&!S){var v=o(a,Qe());d=v.value,a=v.value,tt(v.offset)}if(s&&c&&(a=c(a),d=s(a)),f){var p=ee(a,f);tt(p.offset),a=d=p.value}h&&(a=null!=a?h(a):a),Se&&g&&!i.initial&&(ie("Validating after change ".concat(n," ").concat(a)),ft(Se(a,he.getValues()))),Re(a),We(d),V&&V(a),H.setValue(Y,a,!i.preventUpdate)};re((function(){ve.current.setValue(ze.current)}),y(z));var vt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.preventUpdate;if(ie("Field ".concat(n," has been touched")),Se&&b&&!t&&e&&(ie("Validating after blur ".concat(n," ").concat(dt())),ft(Se(dt(),he.getValues()))),a&&C&&!t&&e&&(ie("Validating async after blur ".concat(n," ").concat(dt())),a(dt(),he.getValues())),u&&S){var l=u(dt());Re(l),We(l),V&&V(l),H.setValue(Y,l,!i)}if(o&&S){var s=o(dt());tt(s.offset),Re(s.value),We(s.value),V&&V(s.value),H.setValue(Y,s.value,!i)}Le(e),H.setTouched(Y,e,!i)},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preventUpdate,n=ae(Je.current||H.getInitialValue(Ke.current),u,f,h,U);ht(n,null,{initial:!0,preventUpdate:t}),ft(F?Se(n):void 0,{preventUpdate:t}),vt(void 0,!0,{preventUpdate:t}),me.current=!1},gt=function(e){Se&&(ie("Field validating ".concat(n," ").concat(dt())),ft(Se(dt(),e||he.getValues())))},mt=function(e){a&&(ie("Field async validating ".concat(n," ").concat(dt())),a(dt(),e||he.getValues()))},yt={setValue:ht,setTouched:vt,setError:ft,reset:pt,validate:gt,asyncValidate:mt,getValue:dt,getTouched:Ue,getError:De,getIsRelevant:ot,getDirty:be,getPristine:ye,getFieldState:function(){return{value:dt(),touched:Ue(),dirty:be(),pristine:ye()}},relevant:rt,multistepRelevant:st,checkRelevant:ct};ve.current=yt;var bt={value:Oe,error:Te,touched:Ne,maskedValue:qe,isRelevant:lt,dirty:me.current,pristine:!me.current};O&&(bt={error:Te,touched:Ne}),ie("Render",he.getFullField(n),bt),te((function(){var e=he.getFullField(Ke.current);return ie("Register",Y,Ke.current),ge.current={field:e,fieldId:Y,fieldApi:yt,fieldState:bt,notify:k,keepState:A,inMultistep:fe,shadow:O},H.register(Y,ge.current),function(){var e=he.getFullField(Ke.current);ie("Deregister",Y,e),H.deregister(Y)}}),[]),(0,r.useEffect)((function(){var e=he.getFullField(n);return pe.current?pe.current=!1:(ie("Update",n,fe),ge.current.field=e,H.update(Y,ge.current,Xe.current)),function(){Xe.current=e}}),[n]),te((function(){w&&Ze&&(Ze.current.style.border="5px solid orange",setTimeout((function(){Ze.current.style.borderWidth="2px",Ze.current.style.borderStyle="inset",Ze.current.style.borderColor="initial",Ze.current.style.borderImage="initial"}),500))}));var Ft=[].concat(y(Object.values(bt)),y(Object.values(e)),y(Object.values(J))),Ct=function(e){return(0,r.useMemo)((function(){return lt?e:null}),y(Ft))},St=n,Et=oe({fieldType:I,setValue:ht,onChange:j,multiple:P,ref:Ze}),Vt=se({setTouched:vt,onBlur:D}),kt=ce({fieldType:I,maskedValue:qe,multiple:P,value:Oe}),At=de(I);return{fieldState:bt,fieldApi:yt,render:Ct,ref:Ze,userProps:d(d({},J),{},{multiple:P,onChange:j,onBlur:D,id:J.id||Y}),informed:d({name:St,multiple:P,onChange:Et,onBlur:Vt,value:kt,ref:Ze,type:At,id:J.id||Y},J)}}var ve,pe=function(e){var t=r.default.forwardRef((function(t,n){var i=he(t,n),a=i.fieldState,l=i.fieldApi,u=i.render,o=i.ref,c=i.userProps;return u(r.default.createElement(e,s({fieldApi:l,fieldState:a,field:t.field,forwardedRef:o,debug:t.debug,type:t.type},c)))}));return t.displayName="asField(".concat(W(e),")"),t},ge=E("informed:Text\t"),me=pe((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.maskedValue,l=t.setValue,u=t.setTouched,o=i.onChange,c=i.onBlur,d=i.field,f=(i.initialValue,i.forwardedRef),h=i.debug,p=i.label,g=(i.title,i.id),m=v(i,["onChange","onBlur","field","initialValue","forwardedRef","debug","label","title","id"]);return ge("Render",d),te((function(){h&&f&&(f.current.style.background="red",setTimeout((function(){f.current.style.background="white"}),500))})),r.default.createElement(r.default.Fragment,null,p?r.default.createElement("label",{htmlFor:g}," ",p," "):null,r.default.createElement("input",s({},m,{id:g,name:d,ref:f,value:a||0===a?a:"",onChange:function(e){l(e.target.value,e),o&&o(e)},onBlur:function(e){u(!0),c&&c(e)}})))})),ye=pe((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.maskedValue,l=t.setValue,u=t.setTouched,o=i.onChange,c=i.onBlur,d=i.field,f=(i.initialValue,i.forwardedRef),h=i.debug,p=i.label,g=i.id,m=v(i,["onChange","onBlur","field","initialValue","forwardedRef","debug","label","id"]);return te((function(){h&&f&&(f.current.style.background="red",setTimeout((function(){f.current.style.background="white"}),500))})),r.default.createElement(r.default.Fragment,null,p?r.default.createElement("label",{htmlFor:g}," ",p," "):null,r.default.createElement("textarea",s({},m,{id:g,name:d,ref:f,value:a||"",onChange:function(e){l(e.target.value,e),o&&o(e)},onBlur:function(e){u(!0),c&&c(e)}})))})),be=E("informed:Select\t"),Fe=pe((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.value,l=t.setTouched,u=i.onChange,o=i.onBlur,c=i.field,d=(i.initialValue,i.options),f=i.children,h=i.forwardedRef,p=i.debug,g=i.multiple,m=i.label,y=i.id,b=v(i,["onChange","onBlur","field","initialValue","options","children","forwardedRef","debug","multiple","label","id"]),F=(0,r.useRef)();return te((function(){p&&h&&(h.current.style.background="red",setTimeout((function(){h.current.style.background="white"}),500))})),be("Render",c,a),r.default.createElement(r.default.Fragment,null,m?r.default.createElement("label",{htmlFor:y}," ",m," "):null,r.default.createElement("select",s({},b,{id:y,multiple:g,name:c,ref:h||F,value:a||(g?[]:""),onChange:function(e){var n=Array.from((h||F).current).filter((function(e){return e.selected})).map((function(e){return e.value}));t.setValue(g?n:n[0]||""),u&&e&&u(e)},onBlur:function(e){l(!0),o&&o(e)}}),d?d.map((function(e){return r.default.createElement("option",{key:e.value,value:e.value,disabled:e.disabled},e.label)})):f))})),Ce=pe((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.value,l=t.setValue,u=t.setTouched,o=i.onChange,c=i.onBlur,d=i.field,f=(i.initialValue,i.debug,i.forwardedRef),h=i.id,p=i.label,g=v(i,["onChange","onBlur","field","initialValue","debug","forwardedRef","id","label"]);return r.default.createElement(r.default.Fragment,null,p?r.default.createElement("label",{htmlFor:h}," ",p," "):null,r.default.createElement("input",s({},g,{id:h,name:d,ref:f,checked:!!a,onChange:function(e){l(e.target.checked),o&&o(e)},onBlur:function(e){u(!0),c&&c(e)},type:"checkbox"})))})),Se=(ve=function(e){var t=e.radioGroupApi,n=e.radioGroupState,i=v(e,["radioGroupApi","radioGroupState"]),a=n.value,l=t.setValue,u=t.setTouched,o=t.onChange,c=t.onBlur,d=i.value,f=i.onChange,h=i.onBlur,p=i.field,g=(i.initialValue,i.forwardedRef),m=v(i,["value","onChange","onBlur","field","initialValue","forwardedRef"]);return r.default.createElement("input",s({},m,{name:p,ref:g,value:d,checked:a===d,onChange:function(e){e.target.checked&&(l(d),f&&f(e),o&&o(e))},onBlur:function(e){u(!0),h&&h(e),c&&c(e)},type:"radio"}))},r.default.forwardRef((function(e,t){return r.default.createElement(M.Consumer,null,(function(n){var i=n.radioGroupApi,a=n.radioGroupState;return r.default.createElement(ve,s({radioGroupApi:i,radioGroupState:a,ref:t},e))}))}))),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=g(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.children;return r.default.createElement(M.Provider,{value:this.groupContext},t?t.map((function(e){return r.default.createElement("label",{key:e.value},e.label," ",r.default.createElement(Se,{value:e.value}))})):n)}},{key:"groupContext",get:function(){return{radioGroupApi:d(d({},this.props.fieldApi),{},{onChange:this.props.onChange,onBlur:this.props.onBlur}),radioGroupState:this.props.fieldState}}}]),n}(r.Component),Ve=pe(Ee);var ke=E("informed:useArrayField\t"),Ae=function(e){var t=e.field,n=e.initialValue,i=e.validate,a=e.arrayFieldApiRef,l=v(e,["field","initialValue","validate","arrayFieldApiRef"]),u=$(),o=m((0,r.useState)(new Map),1)[0],s=(0,r.useContext)(T),c=u.getFullField(t),f=s.getInitialValue(t)||n||[],h=m(q(u.getSavedValue(c)&&u.getSavedValue(c).value||f),3),p=h[0],g=h[1],b=h[2],F=m(q(p?p.map((function(){return Z()})):[]),3),C=F[0],S=F[1],E=F[2],V=(0,r.useMemo)((function(){return function(e,t){var n=null==E()?0:E().length;return i?i(e,n,t):void 0}})),k=he(d({field:t,validate:i?V:void 0,shadow:!0},l)).fieldApi;te((function(){var e=function(e){e!==c&&(ke("".concat(c," changed")),RegExp("".concat(c,"\\[[0-9]+\\]")).test(e)&&k.validate())};return u.emitter.on("value",e),function(){u.emitter.removeListener("value",e)}}),[t]);var A=function(e,n){ke("Swapping","".concat(t,"[").concat(e,"] and ").concat(t,"[").concat(n,"]"));var r=y(C);C[e]&&C[n]?(r[e]=C[n],r[n]=C[e]):console.warn("Attempted to swap ".concat(e," with ").concat(n," but one of them does not exist :(")),S(r)},x=function(){C.push(Z()),S(y(C))},w=function(e){C.push(Z()),S(y(C));var t=y(b());t[C.length-1]=e,g(t)},O=C.map((function(e,n){var r={remove:function(){return function(e){ke("EXPECTING REMOVAL OF","".concat(t,"[").concat(e,"] and ").concat(t,"[").concat(C.length-1,"]")),s.expectRemoval("".concat(t,"[").concat(e,"]")),s.expectRemoval("".concat(t,"[").concat(C.length-1,"]"));var n=C.slice(0,e).concat(C.slice(e+1,C.length));S(n);var r=b(),i=r.slice(0,e).concat(r.slice(e+1,r.length));g(i)}(n)}},i={initialValue:p&&p[n],key:e,field:"".concat(t,"[").concat(n,"]"),index:n};return d(d({arrayFieldItemApi:r,arrayFieldItemState:i},r),i)})),R={add:x,swap:A,addWithInitialValue:w,reset:function(){var e=s.getInitialValue(t)||n||[];g(e);var r=e?e.map((function(){return Z()})):[];S(r)}};a&&(a.current=R);var I={fields:O,field:t},P=d(d({},s),{},{register:function(e,t){o.set(e,t);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.register.apply(s,[e,t].concat(r))},deregister:function(e){o.delete(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.deregister.apply(s,[e].concat(n))},getInitialValue:function(e){if(RegExp("".concat(c,"\\[[0-9]+\\]")).test(e)){var n=e.replace(t,""),r=B.get(b(),n);return ke("Resetting ".concat(n," to ").concat(r)),r}return s.getInitialValue(e)}});return{render:function(e){return r.default.createElement(T.Provider,{value:P},r.default.createElement(N.Provider,{value:R},r.default.createElement(G.Provider,{value:I},e)))},add:x,swap:A,addWithInitialValue:w,fields:O,arrayFieldState:I,arrayFieldApi:R,field:t}};function xe(e){var t=$(),n=(0,r.useMemo)((function(){return function(e,t){return d(d({},t),{},{getValue:function(n){return t.getValue("".concat(e,".").concat(n))},getTouched:function(n){return t.getTouched("".concat(e,".").concat(n))},getError:function(n){return t.getError("".concat(e,".").concat(n))},setValue:function(n,r){return t.setValue("".concat(e,".").concat(n),r)},setTouched:function(n,r){return t.setTouched("".concat(e,".").concat(n),r)},setError:function(n,r){return t.setError("".concat(e,".").concat(n),r)},getInitialValue:function(n){return t.getInitialValue("".concat(e,".").concat(n))},getSavedValue:function(n){return t.getSavedValue("".concat(e,".").concat(n))},getFullField:function(n){return"".concat(t.getFullField(e),".").concat(n)}})}(e,t)}),[e]);return n}function we(){return(0,r.useContext)(j)}var Oe=function(e){var t=e.when,n=e.children;return t(we())?n:null},Re=function(e){var t=e.relevant,n=e.field,i=v(e,["relevant","field"]),a=$();if(t){var l=a.getFullField(n),u={path:l,parentPath:l.replace(/(.*)[.[].*/,"$1"),get:function(e,t){return B.get(e,t)}};return r.default.createElement(Oe,{when:function(e){var n=e.values;return t(n,u)}},r.default.createElement(Ie,s({field:n},i)))}return r.default.createElement(Ie,s({field:n},i))},Ie=function(e){var t=e.children,n=v(e,["children"]),r=Ae(n),i=r.render,a=r.arrayFieldState,l=r.arrayFieldApi,u=r.field;return i("function"==typeof t?t(d(d({field:u,arrayFieldApi:l,arrayFieldState:a},l),a)):t)},Be=function(e){var t=e.arrayFieldItemState,n=e.arrayFieldItemApi,i=e.children,a=(0,r.useContext)(T),l=$(),u=m((0,r.useState)(0),2),o=(u[0],u[1]),s=m((0,r.useState)(new Map),1)[0],c=t.field,f=xe(c);(0,r.useEffect)((function(){var e=function(e){e.slice(0,-1!=e.lastIndexOf("[")?e.lastIndexOf("]")+1:e.length)===c&&o(Math.random())};return l.emitter.on("value",e),function(){l.emitter.removeListener("value",e)}}),[c]);var h,v,p,g,y=(h=l.getState(),v=h.values,p=h.errors,g=h.touched,{values:B.get(v,c),errors:B.get(p,c),touched:B.get(g,c)}),b=d(d({},a),{},{register:function(e,t,n){s.set(e,t),a.register(e,t,n)},deregister:function(e){s.delete(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.deregister.apply(a,[e].concat(n))}}),F=d(d(d({},n),f),{},{reset:function(){s.forEach((function(e){e.fieldApi.reset()}))}}),C=d(d({},t),y);return"function"==typeof i?r.default.createElement(T.Provider,{value:b},r.default.createElement(L.Provider,{value:F},r.default.createElement(U.Provider,{value:C},i(d(d({arrayFieldItemApi:F,arrayFieldItemState:C},F),C))))):r.default.createElement(T.Provider,{value:b},r.default.createElement(L.Provider,{value:F},r.default.createElement(U.Provider,{value:C},i)))};Re.Items=function(e){var t=e.children;return(0,r.useContext)(G).fields.map((function(e){var n=e.arrayFieldItemState,i=e.arrayFieldItemApi,a=n.key;return r.default.createElement(Be,{key:a,arrayFieldItemApi:i,arrayFieldItemState:n},t)}))};var Pe=function(e){var t=e.components,n=(0,r.useContext)(T).fieldMap;return t?t.map((function(e,t){var i=e["ui:control"],a=n[i];return r.default.createElement(a,{key:"ui-comp-".concat(t)})})):null},Te=E("informed:FormFields\t"),je=function e(t){var n=t.schema,i=t.prefix,a=t.onlyValidateSchema,l=(0,r.useContext)(T).fieldMap,u=(0,r.useMemo)((function(){var t=Q(n,a,i).map((function(t,n){var i=t.field,a=t.props,u=t.type,o=t.properties,c=t.items,d=t.componentType,f=t.uiBefore,h=t.uiAfter,v=t.allOf,p=l[d];return Te("Rendering Field",i,t),!p&&"object"===u&&o?r.default.createElement(e,{schema:t,prefix:i,key:"ScheamField-".concat(n)}):!p&&"array"===u&&c?r.default.createElement(De,s({key:"ScheamField-".concat(n),field:i,items:c,uiBefore:f,uiAfter:h},a)):p&&"array"===d&&c&&"array"===u?r.default.createElement(p,s({key:"ScheamField-".concat(n),field:i,items:c,uiBefore:f,uiAfter:h},a)):"conditionals"===d?v.map((function(t){var i=t.then,a=t.if.properties;return r.default.createElement(Oe,{key:"ScheamField-".concat(n),when:function(e){var t=e.values;return Object.keys(a).every((function(e){var n=a[e];return t[e]===n.const}))}},r.default.createElement(e,{schema:i}))})):p?r.default.createElement(p,s({key:"ScheamField-".concat(n),field:i},a)):null}));return t}),[n,i]);return u},De=function(e){var t=e.field,n=e.items,i=e.uiBefore,a=e.uiAfter,l=v(e,["field","items","uiBefore","uiAfter"]);return r.default.createElement(Re,s({field:t},l),r.default.createElement(Pe,{components:i}),r.default.createElement(Re.Items,null,(function(e){var t=e.field;return r.default.createElement(r.default.Fragment,null,r.default.createElement(Pe,{components:n["ui:before"]}),r.default.createElement(je,{schema:n,prefix:t}),r.default.createElement(Pe,{components:n["ui:after"]}))})),r.default.createElement(Pe,{components:a}))},Me={select:Fe,input:me,textarea:ye,checkbox:Ce,radio:Ve,add:function(){var e=(0,r.useContext)(N).add;return r.default.createElement("button",{onClick:function(){e()},type:"button"},"Add")},remove:function(){var e=(0,r.useContext)(L).remove;return r.default.createElement("button",{onClick:function(){e()},type:"button"},"Remove")},array:De},Ge=E("informed:Controller\t"),Ne=function(){},Le=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.options=n,this.subscriptions=new Map;var r=n.ajv,i=n.schema,l=n.fieldMap;this.ajv=r?new r({allErrors:!0}):null,this.ajvValidate=r?this.ajv.compile(i):null,this.fieldMap=l||Me,this.fieldsById=new Map,this.fieldsByName={get:function(e){var n;return t.fieldsById.forEach((function(t){t&&t.field===e&&(n=t)})),n}},this.onScreen={},this.expectedRemovals={},this.pulledOut={},this.savedValues={},this.state={pristine:!0,dirty:!1,invalid:!1,submits:0,step:0,validating:0,submitting:!1,values:{},errors:{},touched:{}},this.dummyField={fieldApi:{setValue:Ne,setTouched:Ne,setError:Ne,reset:Ne,validate:Ne,getValue:Ne,getTouched:Ne,getError:Ne,getFieldState:Ne,checkRelevant:Ne,getPristine:Ne,getDirty:Ne}},this.deregister=this.deregister.bind(this),this.register=this.register.bind(this),this.getValue=this.getValue.bind(this),this.getTouched=this.getTouched.bind(this),this.getError=this.getError.bind(this),this.getErrors=this.getErrors.bind(this),this.setValue=this.setValue.bind(this),this.getValues=this.getValues.bind(this),this.getStep=this.getStep.bind(this),this.setStep=this.setStep.bind(this),this.back=this.back.bind(this),this.next=this.next.bind(this),this.setCurrent=this.setCurrent.bind(this),this.setTouched=this.setTouched.bind(this),this.setError=this.setError.bind(this),this.setFormError=this.setFormError.bind(this),this.submitForm=this.submitForm.bind(this),this.reset=this.reset.bind(this),this.update=this.update.bind(this),this.validate=this.validate.bind(this),this.screenValid=this.screenValid.bind(this),this.keyDown=this.keyDown.bind(this),this.getField=this.getField.bind(this),this.getInitialValue=this.getInitialValue.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.getOptions=this.getOptions.bind(this),this.getFormState=this.getFormState.bind(this),this.expectRemoval=this.expectRemoval.bind(this),this.getSavedValue=this.getSavedValue.bind(this),this.removeSavedState=this.removeSavedState.bind(this),this.getDerrivedValue=this.getDerrivedValue.bind(this),this.setValues=this.setValues.bind(this),this.resetField=this.resetField.bind(this),this.fieldExists=this.fieldExists.bind(this),this.validateField=this.validateField.bind(this),this.notify=this.notify.bind(this),this.validating=this.validating.bind(this),this.validated=this.validated.bind(this),this.getDirty=this.getDirty.bind(this),this.getPristine=this.getPristine.bind(this),this.on=this.on.bind(this),this.emit=this.emit.bind(this),this.removeListener=this.removeListener.bind(this),this.updater={register:this.register,deregister:this.deregister,getField:this.getField,update:this.update,fieldMap:this.fieldMap,setValue:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.fieldsById.get(e);i.shadow||B.set(t.state.values,i.field,i.fieldApi.getValue()),i.fieldApi.relevant(t.state.values)||B.delete(t.state.values,i.field),t.fieldsById.forEach((function(e){var n=e.fieldApi.checkRelevant();e.fieldApi.multistepRelevant(t.state.values)&&(n||e.keepState)||(B.delete(t.state.values,e.field),B.delete(t.state.touched,e.field),B.delete(t.state.errors,e.field))})),r&&(t.emit("change"),t.emit("field",i.field),t.emit("value",i.field,n))},setTouched:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.fieldsById.get(e);!i.shadow&&i.fieldApi.getIsRelevant()&&B.set(t.state.touched,i.field,i.fieldApi.getTouched()),i.shadow&&null!=i.fieldApi.getError()&&i.fieldApi.relevant(t.state.values)&&B.set(t.state.touched,i.field,i.fieldApi.getTouched()),r&&(t.emit("change"),t.emit("field",i.field))},setError:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.fieldsById.get(e);!i.shadow&&i.fieldApi.getIsRelevant()&&B.set(t.state.errors,i.field,i.fieldApi.getError());var a=B.get(t.state.errors,i.field);(i.shadow&&null!=i.fieldApi.getError()&&i.fieldApi.relevant(t.state.values)||i.shadow&&void 0===i.fieldApi.getError()&&i.fieldApi.relevant(t.state.values)&&"string"==typeof a)&&B.set(t.state.errors,i.field,i.fieldApi.getError()),r&&(t.emit("change"),t.emit("field",i.field))},expectRemoval:this.expectRemoval,getInitialValue:this.getInitialValue,getSavedValue:this.getSavedValue},this.formApi={setValue:this.setValue,setTouched:this.setTouched,setError:this.setError,setFormError:this.setFormError,setValues:this.setValues,setInitialValue:this.setInitialValue,getValue:this.getValue,getTouched:this.getTouched,getError:this.getError,reset:this.reset,submitForm:this.submitForm,getState:this.getFormState,getValues:this.getValues,getFullField:this.getFullField,fieldExists:this.fieldExists,getInitialValue:this.getInitialValue,validate:this.validate,validateField:this.validateField,screenValid:this.screenValid,resetField:this.resetField,getOptions:this.getOptions,emitter:this,getSavedValue:this.getSavedValue,removeSavedState:this.removeSavedState,getDerrivedValue:this.getDerrivedValue,getStep:this.getStep,setStep:this.setStep,next:this.next,back:this.back,setCurrent:this.setCurrent,validated:this.validated,validating:this.validating,getDirty:this.getDirty,getPristine:this.getPristine,getField:this.getField},this.on("value",(function(e){delete t.state.error,t.notify(e)}))}return u(e,[{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.subscriptions.get(e);i&&i.forEach((function(e){return e.apply(void 0,n)}))}},{key:"on",value:function(e,t){this.subscriptions.get(e)||this.subscriptions.set(e,new Set),this.subscriptions.get(e).add(t)}},{key:"removeListener",value:function(e,t){this.subscriptions.get(e).delete(t)}},{key:"setOptions",value:function(e){this.options=e}},{key:"setValue",value:function(e,t,n){this.getField(e).fieldApi.setValue(t,null,d({allowEmptyString:this.options.allowEmptyStrings},n))}},{key:"setTouched",value:function(e,t){this.getField(e).fieldApi.setTouched(t)}},{key:"setError",value:function(e,t){this.getField(e).fieldApi.setError(t)}},{key:"setFormError",value:function(e){this.state.error=e,this.emit("change")}},{key:"validating",value:function(){this.state.validating=this.state.validating+1,this.emit("change")}},{key:"validated",value:function(e,t){this.state.validating=this.state.validating-1,this.getError(e)||this.setError(e,t),this.state.validating>0||this.state.submitting&&(this.valid()?(Ge("Submit",this.state),this.emit("submit")):(Ge("Submit",this.state),this.emit("failure")),this.state.submitting=!1),this.emit("change")}},{key:"setStep",value:function(e){this.state.step=e,this.emit("change")}},{key:"setCurrent",value:function(e){this.state.Current=e,this.emit("change")}},{key:"back",value:function(e){this.state.step=this.state.step-1,this.state.Current=e,this.emit("change")}},{key:"next",value:function(e){this.validate(),this.screenValid()&&(this.state.step=this.state.step+1,this.state.Current=e),this.emit("change")}},{key:"setInitialValue",value:function(e,t){B.set(this.options.initialValues,e,t)}},{key:"getFormState",value:function(){return Ge("Returning form state"),d(d({},this.state),{},{pristine:this.pristine(),dirty:this.dirty(),invalid:this.invalid()})}},{key:"getFormApi",value:function(){return this.formApi}},{key:"getDerrivedValue",value:function(e){var t=this.getValues();return B.get(t,e)}},{key:"getValue",value:function(e){var t=this.getField(e).fieldApi.getValue();return Ge("Getting value for",e,t),t}},{key:"getTouched",value:function(e){var t=this.getField(e).fieldApi.getTouched();return Ge("Getting touched for",e,t),t}},{key:"getError",value:function(e){var t=this.getField(e).fieldApi.getError();return Ge("Getting error for",e,t),t}},{key:"getDirty",value:function(e){var t=this.getField(e).fieldApi.getDirty();return Ge("Getting dirty for",e,t),t}},{key:"getPristine",value:function(e){var t=this.getField(e).fieldApi.getPristine();return Ge("Getting pristine for",e,t),t}},{key:"getValues",value:function(){return Ge("Gettings values"),this.state.values}},{key:"getAllTouched",value:function(){return Ge("Gettings touched"),this.state.touched}},{key:"getErrors",value:function(){return Ge("Gettings errors"),this.state.errors}},{key:"getOptions",value:function(){return this.options}},{key:"getStep",value:function(){return this.state.step}},{key:"getSavedValue",value:function(e){var t=this.fieldsByName.get(e);return t&&t.shadow?B.get(this.savedValues,"shadow-".concat(e)):B.get(this.savedValues,e)}},{key:"removeSavedState",value:function(e){var t=this.fieldsByName.get(e);return t&&t.shadow?B.delete(this.savedValues,"shadow-".concat(e)):B.delete(this.savedValues,e)}},{key:"getFullField",value:function(e){return e}},{key:"getInitialValue",value:function(e){return B.get(this.options.initialValues,e)}},{key:"getField",value:function(e){Ge("Getting Field",e);var t=this.fieldsByName.get(e);return t||(console.warn("Attempting to get field ".concat(e," but it does not exist")),this.dummyField)}},{key:"notify",value:function(e){var t=this,n=this.getField(e);n&&n.notify&&n.notify.forEach((function(n){var r=".".concat(e),i="".concat(r.replace(/(.*)[.[].*/,"$1"),".").concat(n).slice(1),a=t.getField(i);a&&(Ge("Notifying",a.field),a.fieldApi.validate(),a.fieldApi.checkRelevant())}))}},{key:"validateField",value:function(e){this.getField(e).fieldApi.validate()}},{key:"resetField",value:function(e){this.getField(e).fieldApi.reset()}},{key:"fieldExists",value:function(e){return null!=this.fieldsByName.get(e)}},{key:"valid",value:function(){var e=this.getErrors();return!(!B.empty(e)||this.state.error)}},{key:"screenValid",value:function(){return!Object.entries(this.onScreen).some((function(e){return m(e,2)[1].fieldApi.getError()}))}},{key:"invalid",value:function(){var e=this.getErrors();return!(B.empty(e)&&!this.state.error)}},{key:"pristine",value:function(){var e=!0;return this.fieldsById.forEach((function(t){t.fieldApi.getPristine()||(e=!1)})),e}},{key:"dirty",value:function(){return!this.pristine()}},{key:"reset",value:function(){Ge("Resetting"),this.fieldsById.forEach((function(e){e.fieldApi.reset({preventUpdate:!0})})),this.emit("reset"),this.emit("change")}},{key:"setValues",value:function(e){Ge("Setting values"),this.fieldsById.forEach((function(t){var n=B.get(e,t.field);void 0!==n&&t.fieldApi.setValue(n,null,{preventUpdate:!0})})),this.emit("change")}},{key:"validate",value:function(){var e=this;Ge("Validating all fields");var t=this.getValues();if(this.options.validationSchema){var n=J(this.options.validationSchema,t);this.fieldsById.forEach((function(t){if(B.has(n,t.field)){var r=B.get(n,t.field);e.setError(t.field,r)}else e.setError(t.field,void 0)}))}if(this.options.schema&&this.options.ajv){var r=Y(this.ajvValidate,t);this.fieldsById.forEach((function(t){if(B.has(r,t.field)){var n=B.get(r,t.field);e.setError(t.field,n)}else e.setError(t.field,void 0)}))}if(this.fieldsById.forEach((function(e){e.fieldApi.validate(t),e.fieldApi.setTouched(!0,!0)})),this.options.validate){var i=this.options.validate(t);this.setFormError(i)}if(this.options.validateFields){var a=this.options.validateFields(t);this.fieldsById.forEach((function(t){if(B.has(a,t.field)){var n=B.get(a,t.field);e.setError(t.field,n)}}))}}},{key:"asyncValidate",value:function(){Ge("Async Validating all fields");var e=this.getValues();this.fieldsById.forEach((function(t){t.fieldApi.asyncValidate(e)}))}},{key:"keyDown",value:function(e){if(13==e.keyCode&&this.options.preventEnter)return e.preventDefault(e),!1}},{key:"submitForm",value:function(e){this.state.submits=this.state.submits+1,this.state.submitting=!0,!this.options.dontPreventDefault&&e&&e.preventDefault(e),this.validate(),this.emit("change"),this.asyncValidate(),this.state.validating>0||(this.valid()?(Ge("Submit",this.state),this.emit("submit")):(Ge("Submit",this.state),this.emit("failure")),this.state.submitting=!1,this.emit("change"))}},{key:"mount",value:function(){var e=this;this.fieldsById.forEach((function(t){e.emit("field",t.field)}))}},{key:"register",value:function(e,t,n){var r=t.field,i=t.state;Ge("Register ID:",e,"Name:",r,i,"Initial",n);var a,l=r.slice(0,-1!=r.lastIndexOf("[")?r.lastIndexOf("]")+1:r.length);this.fieldsById.forEach((function(e,t){e&&e.field===r&&(a=t)})),a&&(t.keepState||t.inMultistep)?(Ge("Already Registered",r),this.fieldsById.delete(a)):!a||t.keepState&&t.inMultistep||console.warn("Check to make sure you have not registered two fields with the fieldName",r),Ge("Fields Registered",this.fieldsById.size),this.onScreen[e]=t,this.fieldsById.set(e,t),Ge("clearing expected removal",l),delete this.expectedRemovals[l],delete this.pulledOut[l],t.shadow||(this.updater.setValue(e,t.fieldApi.getValue(),!1),this.updater.setError(e,t.fieldApi.getError(),!1),this.updater.setTouched(e,t.fieldApi.getTouched(),!1),n||this.emit("change"),this.emit("field",r))}},{key:"deregister",value:function(e){var t=this.fieldsById.get(e),n=t.field;Ge("Deregister",e,n),delete this.onScreen[e];var r=function(e,t){var n=Object.keys(t).find((function(t){return e.includes(t)}));if(n)return e.slice(0,n.length)===n}(n,this.expectedRemovals),i=n.slice(0,-1!=n.lastIndexOf("[")?n.lastIndexOf("]")+1:n.length);!t.keepState&&!t.inMultistep||r||(Ge("Saving field ".concat(n,"'s value"),t.fieldApi.getFieldState()),t.shadow?B.set(this.savedValues,"shadow-".concat(n),t.fieldApi.getFieldState()):B.set(this.savedValues,n,t.fieldApi.getFieldState())),(r||!t.keepState&&!t.inMultistep||!t.fieldApi.getIsRelevant()&&!t.keepState)&&(Ge("Removing field",n),this.fieldsById.delete(e),r||(B.delete(this.state.values,n),B.delete(this.state.touched,n),B.delete(this.state.errors,n),t.shadow?B.delete(this.savedValues,"shadow-".concat(n)):B.delete(this.savedValues,n)),r&&this.pulledOut[i]&&(Ge("Pulling out",n,"with magic value",i),B.pullOut(this.state.values,i),B.pullOut(this.state.touched,i),B.pullOut(this.state.errors,i),B.pullOut(this.savedValues,i),delete this.pulledOut[i])),this.emit("change")}},{key:"expectRemoval",value:function(e){Ge("Expecting removal of",e),this.expectedRemovals[e]=!0,this.pulledOut[e]=!0}},{key:"update",value:function(e,t,n){Ge("Update",e,t.field,n,t.fieldState.value);var r=t.fieldApi.getValue(),i=t.fieldApi.getError(),a=t.fieldApi.getTouched(),l=this.fieldsByName.get(n);n&&!l&&(B.set(this.state.values,n),B.set(this.state.errors,n),B.set(this.state.touched,n)),B.set(this.state.values,t.field,r),B.set(this.state.errors,t.field,i),B.set(this.state.touched,t.field,a),this.emit("change")}}]),e}(),Ue=E("informed:FormProvider\t\t"),_e=function(e){var t=e.children,n=e.formApi,i=e.formController,a=e.formState,l=v(e,["children","formApi","formController","formState"]);if(Ue("Render FormProvider"),n)return Ue("Render FormProvider with given values"),r.default.createElement(T.Provider,{value:i.updater},r.default.createElement(D.Provider,{value:n},r.default.createElement(j.Provider,{value:a},t)));Ue("Render FormProvider with generated values");var u=qe(l);return r.default.createElement(T.Provider,{value:u.formController.updater},r.default.createElement(D.Provider,{value:u.formApi},r.default.createElement(j.Provider,{value:u.formState},t)))},$e=E("informed:useForm\t\t"),qe=function(e){var t=e.dontPreventDefault,n=e.initialValues,i=e.validate,a=e.validateFields,l=e.allowEmptyStrings,u=e.preventEnter,o=e.getApi,s=e.apiRef,c=e.onChange,d=e.onReset,f=e.onSubmit,h=e.onValueChange,p=e.onSubmitFailure,g=e.validationSchema,y=e.schema,b=e.ajv,F=e.fieldMap,C=e.onlyValidateSchema,S=v(e,["dontPreventDefault","initialValues","validate","validateFields","allowEmptyStrings","preventEnter","getApi","apiRef","onChange","onReset","onSubmit","onValueChange","onSubmitFailure","validationSchema","schema","ajv","fieldMap","onlyValidateSchema"]);$e("Render useForm");var E=(0,r.useMemo)((function(){return{dontPreventDefault:t,initialValues:n,validate:i,validateFields:a,allowEmptyStrings:l,preventEnter:u,validationSchema:g,schema:y,ajv:b,fieldMap:F}}),[t,n,i,a,l,u,g,y,b,F]),V=m((0,r.useState)((function(){return new Le(E)})),1)[0];(0,r.useEffect)((function(){V.setOptions(E)}),[E]),te((function(){V.mount()}),[]);var k=m((0,r.useState)((function(){return V.getFormState()})),2),A=k[0],x=k[1];te((function(){var e=function(){return c&&c(V.getFormState())},t=function(){return d&&d()},n=function(){return f&&f(V.getFormState().values)},r=function(){return h&&h(V.getFormState().values)},i=function(){return p&&p(V.getFormState().errors)};return V.on("change",e),V.on("reset",t),V.on("submit",n),V.on("value",r),V.on("failure",i),function(){V.removeListener("change",e),V.removeListener("reset",t),V.removeListener("submit",n),V.removeListener("value",r),V.removeListener("failure",i)}}),[c,d,f,h,p]),(0,r.useState)((function(){V.on("change",(function(){$e("Setting form state"),x(V.getFormState())})),o&&o(V.getFormApi()),s&&(s.current=V.getFormApi())}));var w=m((0,r.useState)((function(){return V.getFormApi()})),1)[0];return{formApi:w,formState:A,formController:V,render:function(e){return r.default.createElement(_e,{formApi:w,formState:A,formController:V},r.default.createElement(r.default.Fragment,null,e||r.default.createElement(je,{schema:y,onlyValidateSchema:C})))},userProps:S}},We=E("informed:Form\t\t"),ze=function(e){var t=e.children,n=e.render,i=e.component,a=v(e,["children","render","component"]);We("Render FORM");var l,u=qe(a),o=u.formApi,c=u.formController,d=u.formState,f=u.render,h=u.userProps;return f(r.default.createElement("form",s({},h,{onReset:c.reset,onSubmit:c.submitForm,onKeyDown:c.keyDown}),(l={formState:d,formApi:o},i?r.default.createElement(i,l,t):n?n(l):"function"==typeof t?t(l):t)))}}}]);
//# sourceMappingURL=60f1d00b-f00ee09ed15067e8d093.js.map